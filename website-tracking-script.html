<!-- Website Analytics Tracking Script -->
<!-- Add this script to the <head> or end of <body> tag on every page of your website -->

<script>
(function() {
  // Generate or retrieve session ID
  function getSessionId() {
    let sessionId = sessionStorage.getItem('analytics_session');
    if (!sessionId) {
      sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
      sessionStorage.setItem('analytics_session', sessionId);
    }
    return sessionId;
  }

  // Track page view
  function trackPageView() {
    const data = {
      page: window.location.pathname,
      referrer: document.referrer || 'Direct',
      userAgent: navigator.userAgent,
      sessionId: getSessionId()
    };

    // Send tracking data
    fetch('https://marketingappos.onrender.com/api/track/pageview', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(data)
    }).catch(err => console.error('Analytics tracking error:', err));
  }

  // Track when page loads
  if (document.readyState === 'complete') {
    trackPageView();
  } else {
    window.addEventListener('load', trackPageView);
  }

  // Track navigation for single-page apps (optional)
  let lastPath = window.location.pathname;
  setInterval(() => {
    if (window.location.pathname !== lastPath) {
      lastPath = window.location.pathname;
      trackPageView();
    }
  }, 1000);
})();
</script>

<!-- 
  INSTALLATION INSTRUCTIONS:
  
  1. Copy the <script> tag above
  2. Paste it into your website's HTML, preferably before the closing </body> tag
  3. For WordPress: Use a plugin like "Insert Headers and Footers" or add to your theme's footer.php
  4. For Wix/Squarespace: Add it via their custom code injection settings
  5. For custom websites: Add directly to your HTML template
  
  The script will automatically:
  - Track every page view
  - Record referrer information
  - Detect device type and browser
  - Track unique sessions
  - Work with single-page applications
  
  View your analytics at: https://marketingappos.onrender.com/analytics
-->

